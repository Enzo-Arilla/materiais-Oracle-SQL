SELECT * FROM USER_CONSTRAINTS;

SELECT * FROM ALL_CONSTRAINTS;

CREATE TABLE TCIDADECURSO 
(
  COD_CIDADE NUMBER NOT NULL,
  NOME VARCHAR2(40),
  CONSTRAINT PK_CIDADE PRIMARY KEY (COD_CIDADE)
);

CREATE TABLE TBAIRROCURSO 
( 
  COD_CIDADE NUMBER NOT NULL,
  COD_BAIRRO NUMBER NOT NULL,
  NOME VARCHAR2(40),
  CONSTRAINT PK_BAIRRO PRIMARY KEY (COD_CIDADE, COD_BAIRRO)
);

ALTER TABLE TBAIRROCURSO ADD CONSTRAINT FK_COD_CIDADE
FOREIGN KEY (COD_CIDADE)
REFERENCES TCIDADECURSO(COD_CIDADE);

CREATE TABLE TRUACURSO
(
  COD_RUA NUMBER NOT NULL,
  COD_CIDADE NUMBER,
  COD_BAIRRO NUMBER,
  NOME VARCHAR2(40),
  CONSTRAINT PK_RUA PRIMARY KEY(COD_RUA)
);

ALTER TABLE TRUACURSO ADD CONSTRAINT FK_CIDADEBAIRRO
FOREIGN KEY(COD_CIDADE, COD_BAIRRO)
REFERENCES TBAIRROCURSO(COD_CIDADE, COD_BAIRRO);

CREATE TABLE TPESSOACURSO 
(
  COD_PESSOA NUMBER NOT NULL,
  TIPO VARCHAR2(1) NOT NULL,
  NOME VARCHAR2(30) NOT NULL,
  PESSOA VARCHAR2(1) NOT NULL,
  COD_RUA NUMBER NOT NULL,
  CPF VARCHAR2(15),
  CONSTRAINT PK_PESSOA PRIMARY KEY (COD_PESSOA)
);

ALTER TABLE TPESSOACURSO ADD CONSTRAINT UK_CPF UNIQUE(CPF);

ALTER TABLE TPESSOACURSO ADD CONSTRAINT FK_PESSOA_RUA
FOREIGN KEY (COD_RUA)
REFERENCES TRUACURSO;

INSERT INTO TCIDADECURSO VALUES (1, 'NOVO HAMBURGO');

INSERT INTO TCIDADECURSO VALUES (2, 'IVOTI');

INSERT INTO TCIDADECURSO VALUES (3, 'SAPIRANGA');

INSERT INTO TCIDADECURSO VALUES (4, 'TAQUARA');

INSERT INTO TBAIRROCURSO VALUES (1, 1, 'CENTRO');

INSERT INTO TBAIRROCURSO VALUES (2, 1, 'RIO BRANCO');

INSERT INTO TBAIRROCURSO VALUES (3, 1, 'CENTRO');

INSERT INTO TBAIRROCURSO VALUES (4, 1, 'FRITZ');

INSERT INTO TRUACURSO VALUES (1, 1, 1, 'MARCILIO DIAS');

INSERT INTO TRUACURSO VALUES (2, 2, 1, 'FRITZ');

INSERT INTO TRUACURSO VALUES (3, 3, 1, 'JACOBINA');

INSERT INTO TRUACURSO VALUES (4, 3, 1, 'JOAO DA SILVA');

ALTER TABLE TPESSOACURSO ADD CONSTRAINT CK_PESSOA_TIPO
CHECK(TIPO IN ('C', 'F'));

ALTER TABLE TPESSOACURSO ADD CONSTRAINT CK_PESSOA_JF
CHECK(PESSOA IN ('J', 'F'));

ALTER TABLE TPESSOACURSO DROP CONSTRAINT NOME_CONSTRAINT;

INSERT INTO TPESSOACURSO VALUES (1, 'C', 'MARCIO', 'F', 1, '1234');

INSERT INTO TPESSOACURSO VALUES (2, 'F', 'BEATRIZ', 'F', 2, '123');

INSERT INTO TPESSOACURSO VALUES (3, 'F', 'PEDRO', 'F', 4, '123');

INSERT INTO TPESSOACURSO VALUES (4, 'C', 'MARIA', 'J', 3, '125'); 

ALTER  TABLE TPESSOACURSO DROP CONSTRAINT UK_CPF;

ALTER TABLE TPESSOACURSO ADD CONSTRAINT UK_CPF UNIQUE(CPF);

DELETE FROM TPESSOACURSO;

INSERT INTO TPESSOACURSO VALUES (1, 'C', 'MARCIO', 'F', 1, '1234');

INSERT INTO TPESSOACURSO VALUES (2, 'F', 'BEATRIZ', 'F', 2, '123');

INSERT INTO TPESSOACURSO VALUES (3, 'F', 'PEDRO', 'F', 4, '1238');

INSERT INTO TPESSOACURSO VALUES (4, 'C', 'MARIA', 'J', 3, '1239'); 

SELECT * FROM TPESSOACURSO;

ALTER TABLE TPESSOACURSO DROP CONSTRAINT UK_CPF
CASCADE CONSTRAINT;

ALTER TABLE TCONTRATO
ADD CONSTRAINT CK_CONTRATO_DESCONTO
CHECK (DESCONTO BETWEEN 0 AND 30);

SELECT * FROM TCONTRATO;

ALTER TABLE TPESSOACURSO DISABLE CONSTRAINT UK_CPF;

ALTER TABLE TPESSOACURSO ENABLE CONSTRAINT UK_CPF;

SELECT * FROM USER_CONSTRAINTS 
WHERE TABLE_NAME = 'TPESSOACURSO';

SELECT OBJECT_NAME, OBJECT_TYPE
FROM USER_OBJECTS
WHERE OBJECT_NAME IN ('TPESSOACURSO');

SELECT * FROM TPESSOACURSO;

COMMIT;