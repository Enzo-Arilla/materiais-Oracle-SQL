CREATE TABLE TALUNO
(
    COD_ALUNO NUMBER NOT NULL,
    NOME VARCHAR2(30),
    CIDADE VARCHAR2(30),
    CEP VARCHAR2(10),
    PRIMARY KEY (COD_ALUNO)
);

SELECT * FROM TALUNO;

INSERT INTO TALUNO VALUES (1, 'MARCIO', 'NOVO HAMBURGO', '13160-354');
INSERT INTO TALUNO VALUES (2, 'PAULA', 'IVOTI', '13160-354');
INSERT INTO TALUNO VALUES (3, 'MARIA', 'SAPIRANGA', '13160-354');

CREATE TABLE TCURSO
(
    COD_CURSO NUMBER NOT NULL PRIMARY KEY,
    NOME VARCHAR2(30),
    VALOR NUMBER(8, 2),
    CARGA_HORARIA NUMBER
);

SELECT * FROM TCURSO;

INSERT INTO TCURSO VALUES (1, 'ORACLE SQL E PL/SQL', 500, 25);
INSERT INTO TCURSO VALUES (2, 'ORACLE DBA', 499, 25);
INSERT INTO TCURSO VALUES (3, 'JAVA FUNDAMENTOS E OO', 1500, 100);
INSERT INTO TCURSO VALUES (4, 'JAVASERVER FACES', 1600, 100);

CREATE TABLE TCONTRATO
(
    COD_CONTRATO NUMBER NOT NULL PRIMARY KEY,
    DATA DATE,
    COD_ALUNO NUMBER(3),
    TOTAL NUMBER(8, 2),
    DESCONTO NUMBER(5, 2)
);

SELECT * FROM TCONTRATO;

INSERT INTO TCONTRATO VALUES (1, SYSDATE, 1, 500, 10);
INSERT INTO TCONTRATO VALUES (2, SYSDATE, 2, 500, 10);
INSERT INTO TCONTRATO VALUES (3, SYSDATE, 3, 1500, 05);
INSERT INTO TCONTRATO VALUES (4, SYSDATE-5, 2, 1600, 10);
INSERT INTO TCONTRATO VALUES (5, SYSDATE-4, 5, 800, 10);
INSERT INTO TCONTRATO VALUES (6, SYSDATE-3, 5, 445, 0);
INSERT INTO TCONTRATO VALUES (7, SYSDATE-2, 5, 445, 20);

ALTER TABLE TCONTRATO ADD COL_TESTE VARCHAR2(50);
SELECT * FROM TCONTRATO;

ALTER TABLE TALUNO RENAME COLUMN NOME TO NOME2;
SELECT * FROM TALUNO;

ALTER TABLE TALUNO RENAME COLUMN NOME2 TO NOME;
SELECT * FROM TALUNO;

SELECT * FROM TCONTRATO;

SELECT * FROM USER_TABLES;

--SEQUENCIA--
CREATE SEQUENCE SEQ_ALUNO START WITH 4;
INSERT INTO TALUNO VALUES (SEQ_ALUNO.NEXTVAL, 'VALDO', 'CANOAS', '13160-354');
INSERT INTO TALUNO VALUES (SEQ_ALUNO.NEXTVAL, 'ANDRE', 'IVOTI', '13160-354');
SELECT * FROM TALUNO;

--DATA/HORA ATUAL--
SELECT SYSDATE FROM DUAL;

SELECT * FROM DUAL;

--VALOR ATUAL DA SEQUENCE--
SELECT SEQ_ALUNO.CURRVAL FROM DUAL;

--CONFIRMAR ALTERACOES REALIZADAS--
COMMIT;

SELECT * FROM TALUNO;

DELETE FROM TALUNO;

--VOLTAR--
ROLLBACK;

DELETE FROM TALUNO
WHERE COD_ALUNO = 5;

SELECT * FROM TALUNO;

ROLLBACK;

SELECT * FROM TALUNO WHERE NOME = 'VALDO';

DELETE FROM TALUNO WHERE NOME = 'VALDO';

COMMIT;
ROLLBACK;

CREATE TABLE TITEM
(
    COD_ITEM NUMBER NOT NULL PRIMARY KEY,
    COD_CURSO NUMBER,
    COD_CONTRATO NUMBER,
    VALOR NUMBER(8,2)
);

INSERT INTO TITEM VALUES (1, 1, 1, 500);
INSERT INTO TITEM VALUES (2, 1, 2, 500);
INSERT INTO TITEM VALUES (3, 3, 3, 1500);
INSERT INTO TITEM VALUES (4, 4, 4, 1600);
INSERT INTO TITEM VALUES (5, 1, 5, 500);
INSERT INTO TITEM VALUES (6, 1, 6, 500);
INSERT INTO TITEM VALUES (7, 2, 6, 500);
INSERT INTO TITEM VALUES (8, 3, 7, 500);

COMMIT;

SELECT * FROM TITEM;

SELECT * FROM TCONTRATO
WHERE COD_CONTRATO = 2;

UPDATE TCONTRATO SET
DESCONTO = 18
WHERE COD_CONTRATO = 2;

UPDATE TCONTRATO SET
DESCONTO = 20,
DATA = '05/06/2013',
TOTAL = 750
WHERE COD_CONTRATO = 2;

SELECT * FROM TALUNO;

UPDATE TALUNO SET
CIDADE = 'CANOS'
WHERE (UPPER(CIDADE)) = 'IVOTI';

UPDATE TALUNO SET
NOME = 'FRIDA'
WHERE COD_ALUNO = 5;

SELECT * FROM TCURSO;

UPDATE TCURSO SET
VALOR = 499.99
WHERE COD_CURSO = 1;

COMMIT;

SELECT DISTINCT CIDADE
FROM TALUNO;

SELECT DISTINCT CIDADE, COD_ALUNO
FROM TALUNO
ORDER BY CIDADE;

SELECT DISTINCT CIDADE, COD_ALUNO
FROM TALUNO
ORDER BY COD_ALUNO DESC;

SELECT NOME AS CURSO,
       VALOR,
       VALOR/CARGA_HORARIA,
       ROUND(VALOR/CARGA_HORARIA,2) AS VALOR_HORA
FROM TCURSO
ORDER BY VALOR_HORA;

SELECT * FROM TCONTRATO;

UPDATE TCONTRATO SET
DESCONTO = NULL
WHERE COD_CONTRATO = 4;

SELECT COD_CONTRATO, TOTAL, DESCONTO, TOTAL+DESCONTO
FROM TCONTRATO;

SELECT COD_CONTRATO, DESCONTO, NVL(DESCONTO, 0) AS SEM_DESCONTO, TOTAL,
TOTAL + NVL(DESCONTO, 0) AS TOTAL_MAIS_DESCONTO
FROM TCONTRATO;

--CONCATENAR--
SELECT COD_ALUNO || ' - ' || NOME || ' // ' || CIDADE AS ALUNO
FROM TALUNO
ORDER BY COD_ALUNO;

SELECT * FROM TALUNO;

ALTER TABLE TALUNO ADD ESTADO CHAR(2) DEFAULT 'RS';

ALTER TABLE TALUNO ADD SALARIO NUMBER(8,2) DEFAULT 620;

UPDATE TALUNO SET
ESTADO = 'AC',
SALARIO = 250
WHERE COD_ALUNO = 1;

UPDATE TALUNO SET
ESTADO = 'MT', SALARIO = 2000
WHERE COD_ALUNO = 2;

UPDATE TALUNO SET
ESTADO = 'SP', SALARIO = 800
WHERE COD_ALUNO = 5;

SELECT CIDADE
FROM TALUNO
GROUP BY CIDADE;

COMMIT;

SELECT * FROM TALUNO
WHERE ESTADO <> 'RS'
AND SALARIO <= 800
ORDER BY SALARIO DESC;

INSERT INTO TALUNO (COD_ALUNO, NOME, CIDADE)
VALUES (SEQ_ALUNO.NEXTVAL, 'VALDO', 'DOIS IRMAOS');

INSERT INTO TALUNO (COD_ALUNO, NOME, CIDADE)
VALUES (SEQ_ALUNO.NEXTVAL, 'ALDO', 'QUATRO IRMAOS');

SELECT * FROM TALUNO;

UPDATE TALUNO SET
ESTADO = 'SP',
SALARIO = 900,
NOME = 'PEDRO'
WHERE COD_ALUNO = 25;

SELECT ESTADO, SALARIO, NOME FROM TALUNO
ORDER BY ESTADO, SALARIO DESC;

ALTER TABLE TALUNO ADD NASCIMENTO DATE DEFAULT SYSDATE - 1000;

SELECT SYSDATE - SYSDATE - 100 FROM DUAL;

UPDATE TALUNO SET
NASCIMENTO = '10/10/2010'
WHERE COD_ALUNO = 1;

UPDATE TALUNO SET
NASCIMENTO = '10/08/2010'
WHERE COD_ALUNO = 2;

SELECT * FROM TALUNO;

SELECT COD_ALUNO, NASCIMENTO, TRUNC(NASCIMENTO) AS NASCIMENTO, NOME
FROM TALUNO
WHERE NASCIMENTO = '10/08/2010';

UPDATE TALUNO SET
NASCIMENTO = '19/03/2019'
WHERE COD_ALUNO = 5;

SELECT COD_ALUNO, NASCIMENTO, TRUNC(NASCIMENTO), NOME
FROM TALUNO
WHERE NASCIMENTO
BETWEEN TO_DATE('10/08/2010', 'DD/MM/YYYY')
AND TO_DATE('19/04/2020', 'DD/MM/YYYY');

SELECT COD_CONTRATO, DATA, TOTAL, DESCONTO,
       DESCONTO + 1000 AS CALCULO
FROM TCONTRATO
WHERE TOTAL  <= DESCONTO + 1000;

UPDATE TCONTRATO SET
DESCONTO = NULL
WHERE COD_CONTRATO = 2;

SELECT * FROM TCONTRATO
WHERE DESCONTO IS NULL;

SELECT * FROM TCONTRATO
WHERE DESCONTO BETWEEN 0 AND 10;

SELECT COD_CONTRATO, TOTAL, DESCONTO, NVL(DESCONTO, 0)
FROM TCONTRATO
WHERE NVL(DESCONTO, 0) BETWEEN 0 AND 10;

SELECT * FROM TCONTRATO
WHERE DESCONTO >= 0
AND DESCONTO <= 10
OR DESCONTO IS NULL;

SELECT * FROM TITEM
WHERE COD_CURSO IN (1, 2, 4);

SELECT * FROM TITEM
WHERE COD_CURSO NOT IN (1, 2, 3);

INSERT INTO TCURSO VALUES (5, 'WINDOWS', 1000, 50);

SELECT * FROM TCURSO
WHERE COD_CURSO NOT IN (SELECT COD_CURSO FROM TITEM);

SELECT * FROM TITEM
WHERE COD_CURSO = 1
OR COD_CURSO = 2
OR COD_CURSO = 3;

SELECT * FROM TALUNO WHERE NOME LIKE '_A%';
SELECT * FROM TCURSO WHERE NOME LIKE 'W%';
SELECT * FROM TCURSO WHERE NOME LIKE '%JAVA%';
SELECT * FROM TCURSO WHERE NOME LIKE '%FACES';

COMMIT;

ALTER TABLE TCURSO ADD PRE_REQ NUMBER;

UPDATE TCURSO SET
PRE_REQ = 1
WHERE COD_CURSO = 2;

UPDATE TCURSO SET
PRE_REQ = 3
WHERE COD_CURSO = 4;

SELECT * FROM TCURSO WHERE PRE_REQ IS NULL;
SELECT * FROM TCURSO WHERE PRE_REQ IS NOT NULL;

SELECT * FROM TCURSO
WHERE VALOR > 750
OR VALOR < 1000
AND CARGA_HORARIA = 25;

SELECT * FROM TCURSO
WHERE (VALOR > 750
OR VALOR < 1000)
AND CARGA_HORARIA = 25;




